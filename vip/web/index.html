<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>后台</title>
</head>
<body>
    <h1>大新闻</h1>
<!--
<link href="css/common.css" rel="stylesheet"/>
<link href="css/select2.css" rel="stylesheet"/>
<link href="css/myself.css" rel="stylesheet"/>
<div class="sign">
    <text class="zhuce">注册</text>
    <div>
        <input class="phone" maxlength="11" placeholder="手机号码" type="tel" name="" value="">
    </div>
    <div class="sign-sms">
        <input class="phone-sms" maxlength="4" placeholder="输入短信中的验证码" type="tel" name="" value="">
        <button class="btn-sms" type="button" name="button">发送验证码</button>
    </div>
    <div class="sign-address">
        <select id="loc_province"></select>
        <select id="loc_city"></select>
        <select id="loc_town"></select>
    </div>
    <div class="sign-sex">
        <btn>男</btn>
        <span></span>
        <btn>女</btn>
    </div>
    <text class="sign-sure">
        一旦注册，即表示你同意生命之花的
        <a target="_blank" href="">隐私政策</a>
        和
        <a target="_blank" href="">使用条款</a>
    </text>
    <div>
        <button class="btn-login" type="button" name="button">注册</button>
    </div>
    <div class="sign-up">
        <text>已经是会员？</text>
        <a href="/sign-up">立即登陆！</a>
    </div>
</div>
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript" src="js/area.js"></script>
<script type="text/javascript" src="js/location.js"></script>
<script type="text/javascript" src="js/select2.js"></script>
<script type="text/javascript" src="js/select2_locale_zh-CN.js"></script>

17396200129 -->
<!-- <script src="bigsea.js" charset="utf-8"></script> -->
<!-- <script>
Sea.form = {
    sms: false,
}
$('input.phone, input.phone-sms').on('input', function(e) {
    let s = ''
    for (let e of this.value) {
        if (/\d/.test(e)) {
            s += e
        }
    }
    this.value = s
})
$('.sign-sex').on('click', 'btn', function() {
    $('.sign-sex btn').each(function(i) {
        this.style = ''
    })
    this.style.background = '#141414'
    this.style.color = 'white'
    // 性别
    Sea.form.sex = this.innerText
})
$('.btn-sms').on('click', function() {
    let btn = $(this)
    let p = $('input.phone')
    let phone = p.val()
    if (phone.length === 11) {
        if (Sea.form.sms === false) {
            Sea.form.sms = true
            // 验证码
            Sea.Ajax({
                url: 'http://li-flower.com:8110/user_sms',
                data: {
                    phone: phone
                }
            }).then(res => {
                log(res)
                let data = JSON.parse(res)
                if (data.ok) {
                    // alert(data.message)
                    // 倒计时
                    p.attr("readonly", "readonly")
                    let s = 60
                    let countTime = setInterval(function() {
                        s -= 1
                        btn.text(s)
                        if (s === 0) {
                            clearInterval(countTime)
                            btn.text('重新发送')
                            Sea.form.sms = false
                            p.removeAttr("readonly")
                        }
                    }, 1000)
                } else {
                    alert(data.message)
                }
            })
        }
    } else {
        p.focus()
    }
})
$('.btn-login').on('click', function() {
    let o = Sea.form
    let d = {
        '省份': true,
        '地级市': true,
        '市、县、区': true,
    }
    o.province = $('#loc_province').select2('data').text
    o.city = $('#loc_city').select2('data').text
    o.town = $('#loc_town').select2('data').text

    o.phone = $('.sign .phone').val()
    o.phone_sms = $('.sign .phone-sms').val()
    // 表单验证
    if (d[o.province] || d[o.city] || d[o.town]) {
        alert('请选择地址')
        return;
    }
    if (!o.sex) {
        alert('请选择性别')
        return;
    }
    if (!o.phone) {
        alert('请输入手机')
        return;
    }
    if (!o.phone_sms) {
        alert('请输入验证码')
        return;
    }
    // 发送 跨域 Ajax 请求
    Sea.Ajax({
        url: 'http://li-flower.com:8110/user_login',
        // url: '/user_login',
        data: o,
    }).then(res => {
        log(res)
    })
})
</script> -->
</body>
</html>
